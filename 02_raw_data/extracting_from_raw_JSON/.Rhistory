rm(list = ls())
library(readtext)
library(stringr)
library(stringi)
library(dplyr)
library(readr)
setwd("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps")
drive_path <- "/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps" # here set your own drive path since the structure varies between Mac and Windows
entries_as_string <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/sample.txt")
entries_str <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/sample.txt")
print(entries_str)
read.table(text=entries_str,col.names=c('ride)
}
df <- read.table(text=entries_str,col.names=c('ride)
df <- read.table(text=entries_str,col.names=c('ride')
}
df <- read.table(text=entries_str,col.names=c('ride')
df <- read.table(text=entries_str,col.names=c('ride'))
df <- read.table(text=entries_str,col.names=c('ride'))
entries_lines <- entries_str(ride, omit_empty = FALSE)
entries_lines <- stri_split_lines(ride, omit_empty = FALSE)
entries_lines <- cat(entries_str, "ride")
entries_lines <- cat(entries_str, "ride")
entries_str <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile.txt")
print(entries_str)
rm(list = ls())
library(readtext)
library(stringr)
library(stringi)
library(dplyr)
library(readr)
drive_path <- "/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps" # here set your own drive path since the structure varies between Mac and Windows
entries_str <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile.txt")
print(entries_str)
entries_lines <- cat(entries_str, "ride")
#s <- "PRODUCT colgate good but not goodOKAY"
sub(".*CARPOOLING *(.*?) *tripoffer_multimodal_id.*", "\\1", entries_str)
str_lines <- cat(entries_str, "ride")
str_lines <- cat(entries_str, "CARPOOLING")
print(str_lines)
entries_lines <- str_extract(string = entries_str, pattern = "(?<=CARPOOLING).*(?=tripoffer_multimodal_id)")
print(entries_lines)
entries_lines <- strsplit(entries_str, ride)
entries_lines <- strsplit(entries_str, "ride")
View(entries_lines)
entries_lines[[1]]
entries_str <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile.txt")
entries_lines <- str_split(entries_str, '"ride"')
View(entries_lines)
entries_str <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile2.txt")
print(entries_str)
entries_strtest1 <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile.txt")
entries_strtest2 <- gsub("{\\rtf1\\ansi\\ansicpg1252\\cocoartf2638\n\\cocoatextscaling0\\cocoaplatform0{\\fonttbl\\f0\\fswiss\\fcharset0 Helvetica;}\n{\\colortbl;\\red255\\green255\\blue255;}\n{\\*\\expandedcolortbl;;}\n\\paperw11900\\paperh16840\\margl1440\\margr1440\\vieww25100\\viewh19620\\viewkind0\n\\pard\\tx566\\tx1133\\tx1700\\tx2267\\tx2834\\tx3401\\tx3968\\tx4535\\tx5102\\tx5669\\tx6236\\tx6803\\pardirnatural\\partightenfactor0\n\n\\f0\\fs24 \\cf0 \\", "", entries_strtest2)
entries_strtest2 <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile2.txt")
entries_strtest2 <- gsub("{\\rtf1\\ansi\\ansicpg1252\\cocoartf2638\n\\cocoatextscaling0\\cocoaplatform0{\\fonttbl\\f0\\fswiss\\fcharset0 Helvetica;}\n{\\colortbl;\\red255\\green255\\blue255;}\n{\\*\\expandedcolortbl;;}\n\\paperw11900\\paperh16840\\margl1440\\margr1440\\vieww25100\\viewh19620\\viewkind0\n\\pard\\tx566\\tx1133\\tx1700\\tx2267\\tx2834\\tx3401\\tx3968\\tx4535\\tx5102\\tx5669\\tx6236\\tx6803\\pardirnatural\\partightenfactor0\n\n\\f0\\fs24 \\cf0 \\", "", entries_strtest2)
entries_strtest2 <- gsub("\\rtf1\\ansi\\ansicpg1252\\cocoartf2638\n\\cocoatextscaling0\\cocoaplatform0{\\fonttbl\\f0\\fswiss\\fcharset0 Helvetica;}\n{\\colortbl;\\red255\\green255\\blue255;}\n{\\*\\expandedcolortbl;;}\n\\paperw11900\\paperh16840\\margl1440\\margr1440\\vieww25100\\viewh19620\\viewkind0\n\\pard\\tx566\\tx1133\\tx1700\\tx2267\\tx2834\\tx3401\\tx3968\\tx4535\\tx5102\\tx5669\\tx6236\\tx6803\\pardirnatural\\partightenfactor0\n\n\\f0\\fs24 \\cf0 \\", "", entries_strtest2)
print(entries_strtest2)
entries_strtest2 <- str_replace_all(entries_strtest2, '{\\rtf1\\ansi\\ansicpg1252\\cocoartf2638\n\\cocoatextscaling0\\cocoaplatform0{\\fonttbl\\f0\\fswiss\\fcharset0 Helvetica;}\n{\\colortbl;\\red255\\green255\\blue255;}\n{\\*\\expandedcolortbl;;}\n\\paperw11900\\paperh16840\\margl1440\\margr1440\\vieww25100\\viewh19620\\viewkind0\n\\pard\\tx566\\tx1133\\tx1700\\tx2267\\tx2834\\tx3401\\tx3968\\tx4535\\tx5102\\tx5669\\tx6236\\tx6803\\pardirnatural\\partightenfactor0\n\n\\f0\\fs24 \\cf0 \\', '')
entries_strtest2 <- gsub('{\\rtf1\\ansi\\ansicpg1252\\cocoartf2638\n\\cocoatextscaling0\\cocoaplatform0{\\fonttbl\\f0\\fswiss\\fcharset0 Helvetica;}\n{\\colortbl;\\red255\\green255\\blue255;}\n{\\*\\expandedcolortbl;;}\n\\paperw11900\\paperh16840\\margl1440\\margr1440\\vieww25100\\viewh19620\\viewkind0\n\\pard\\tx566\\tx1133\\tx1700\\tx2267\\tx2834\\tx3401\\tx3968\\tx4535\\tx5102\\tx5669\\tx6236\\tx6803\\pardirnatural\\partightenfactor0\n\n\\f0\\fs24 \\cf0 \\', '', entries_strtest2)
entries_strtest2 <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile2.txt")
entries_strtest1 <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile.txt")
entries_strtest2 <- str_replace(entries_strtest2, "{\\rtf1\\ansi\\ansicpg1252\\cocoartf2638\n\\cocoatextscaling0\\cocoaplatform0{\\fonttbl\\f0\\fswiss\\fcharset0 Helvetica;}\n{\\colortbl;\\red255\\green255\\blue255;}\n{\\*\\expandedcolortbl;;}\n\\paperw11900\\paperh16840\\margl1440\\margr1440\\vieww25100\\viewh19620\\viewkind0\n\\pard\\tx566\\tx1133\\tx1700\\tx2267\\tx2834\\tx3401\\tx3968\\tx4535\\tx5102\\tx5669\\tx6236\\tx6803\\pardirnatural\\partightenfactor0\n\n\\f0\\fs24 \\cf0 \\", "")
entries_strtest2 <- str_replace(entries_strtest2, "{\\rtf1\\ansi\\ansicpg1252\\cocoartf2638\n\\cocoatextscaling0\\cocoaplatform0{\\fonttbl\\f0\\fswiss\\fcharset0 Helvetica;}\n{\\colortbl;\\red255\\green255\\blue255;}\n{\\*\\expandedcolortbl;;}\n\\paperw11900\\paperh16840\\margl1440\\margr1440\\vieww25100\\viewh19620\\viewkind0\n\\pard\\tx566\\tx1133\\tx1700\\tx2267\\tx2834\\tx3401\\tx3968\\tx4535\\tx5102\\tx5669\\tx6236\\tx6803\\pardirnatural\\partightenfactor0\n\n\\f0\\fs24 \\cf0 \\", " ")
print(entries_strtest2)
entries_strtest2 <- str_replace(entries_strtest2, "{\\rtf1\\ansi", " ")
entries_strtest2 <- gsub("^{", "", string)
entries_strtest2 <- gsub("^{", "", entries_strtest2)
entries_strtest2 <- entries_strtest2 %>%
mutate(
entries_strtest2 = str_trim(entries_strtest2),
entries_strtest2 = gsub("^{", "", entries_strtest2),
)
entries_strtest2 <- entries_strtest2 %>%
mutate(
entries_strtest2 = str_trim(entries_strtest2),
entries_strtest2 = gsub("^{", "", entries_strtest2)
)
print(entries_strtest2)
entries_strtest2 <- entries_strtest2 %>%
mutate(
entries_strtest2 = str_trim(entries_strtest2),
entries_strtest2 = gsub("ansi", "", entries_strtest2)
)
entries_strtest2 <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile2.txt")
result <- str_split(entries_strtest2, split = ",")
entries_strtest2 <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile2.txt")
print(entries_strtest2)
entries_strtest2 <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile2.txt")
entries_strtest1 <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile.txt")
drive_path <- "/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps" # here set your own drive path since the structure varies between Mac and Windows
entries_strtest2 <- read_file("/Users/sebastianbahralarcon/Ruben's team Dropbox/blablacar/02_raw_data/03_scrape_trip_details/01_raw_json_dumps/Testfile2.txt")
print(entries_strtest2)
result <- str_split(entries_strtest2, split = ",")
result <- str_split(entries_strtest2, split = ", ")
class(entries_strtest2)
result <- str_split(entries_strtest2, split = ", ")
View(entries_lines)
